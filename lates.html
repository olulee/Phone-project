<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>LLvoucher</title>
</head>
<body>
    <input id="num" type="number" placeholder="Number" >
    <select name="" id="amt">
        <option id="amt_1" value="100"> 100</option>
        <option id="amt_2" value="200">200</option>
        <option id="amt_5" value="500">500</option>
        <option id="amt_1k" value="1000">1000</option>
    </select>
    <select name="" id="ntwk">
        <option value="MTN"> MTN</option>
        <option value="GLO">GLO</option>
    </select>
    <button onclick="generate(num.value)">Generate</button>
    <div id="here"></div>
<div style="display: flex;">
    <div id="dist">
        <div  id="dis" style="border:2px solid black; height: 450px; width: 250px; border-radius: 10px;">
            <div style="margin-top: 20px; margin-left:8px">
                <div></div>
                <textarea id="scr" name="" id="" cols="30" rows="10" style="height:140px ; width: 230px; font-size: 40px;"></textarea>
            </div>
            <div id="moda" style="display: none; position: fixed;z-index: 1;padding-top: 100px;">
                <div></div>
            </div>
            <div id="btn" style="margin-top: 40px">
                <table >
                <tr>
                    <button style="width: 70px; height: 40px; margin-left: 15px" onclick="f_num(1)" >1</button>
                    <button style="width: 70px; height: 40px; " onclick="f_num(2)">2</button>
                    <button style="width: 70px; height: 40px; " onclick="f_num(3)">3</button>
                </tr>

                <tr>
                    <button  style="width: 70px; height: 40px; margin-left: 15px" onclick="f_num(4)" >4</button>
                    <button style="width: 70px; height: 40px; " onclick="f_num(5)">5</button>
                    <button style="width: 70px; height: 40px; " onclick="f_num(6)">6</button>
                </tr>

                <tr>
                    <button style="width: 70px; height: 40px; margin-left: 15px" onclick="f_num(7)" >7</button>
                    <button style="width: 70px; height: 40px; " onclick="f_num(8)">8</button>
                    <button style="width: 70px; height: 40px; " onclick="f_num(9)">9</button>
                </tr>

                <tr>
                    <button  style="width: 70px; height: 40px; margin-left: 15px"  onclick="f_num('*')">*</button>
                    <button style="width: 70px; height: 40px; " onclick="f_num(0)">0</button>
                    <button style="width: 70px; height: 40px; " onclick="f_num('#')">#</button>
                </tr>

                <tr>
                    <button style="width: 70px; height: 40px; margin-left: 15px" onclick="call()" >Call</button>
                    <button style="width: 70px; height: 40px; ">3</button>
                    <button style="width: 70px; height: 40px; "><--</button>
                </tr>
            </table>
            </div>
        </div>
    </div>
    <div id="call_p" style="margin-left: 80px; display: none"  >
        <div  id="dis_2" style="border:2px solid black; height: 450px; width: 250px; border-radius: 10px;">
            <div style="margin-top: 20px; margin-left:8px">
                <div></div>
                <textarea id="scr2" name="" id="" cols="30" rows="10" style="height:140px ; width: 230px; font-size: 40px;"></textarea>
            </div>
            <div id="moda2" style="display: none; position: fixed;z-index: 1;padding-top: 100px;">
                <div></div>
            </div>
            <div id="btn2" style="margin-top: 40px">
                <table >
                <tr>
                    <button style="width: 70px; height: 40px; margin-left: 15px" onclick="f_num(1)" >1</button>
                    <button style="width: 70px; height: 40px; " onclick="f_num(2)">2</button>
                    <button style="width: 70px; height: 40px; " onclick="f_num(3)">3</button>
                </tr>

                <tr>
                    <button  style="width: 70px; height: 40px; margin-left: 15px" onclick="f_num(4)" >4</button>
                    <button style="width: 70px; height: 40px; " onclick="f_num(5)">5</button>
                    <button style="width: 70px; height: 40px; " onclick="f_num(6)">6</button>
                </tr>

                <tr>
                    <button style="width: 70px; height: 40px; margin-left: 15px" onclick="f_num(7)" >7</button>
                    <button style="width: 70px; height: 40px; " onclick="f_num(8)">8</button>
                    <button style="width: 70px; height: 40px; " onclick="f_num(9)">9</button>
                </tr>

                <tr>
                    <button  style="width: 70px; height: 40px; margin-left: 15px"  onclick="f_num('*')">*</button>
                    <button style="width: 70px; height: 40px; " onclick="f_num(0)">0</button>
                    <button style="width: 70px; height: 40px; " onclick="f_num('#')">#</button>
                </tr>

                <tr>
                    <button style="width: 70px; height: 40px; margin-left: 15px" onclick="call()" >Call</button>
                    <button style="width: 70px; height: 40px; ">3</button>
                    <button style="width: 70px; height: 40px; "><--</button>
                </tr>
            </table>
            </div>
        </div>
    </div>
</div>
    <div id="sel_nt" style="display: none; align-content: center; margin-left: 150px">
        <button onclick="sim1()">MTN</button> <br>
        <button onclick="sim2()">GLO</button>
    </div>


    </div>
    <div id="myModal" class="modal" style=" display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 18%;height: 20%;overflow: auto;background-color: rgb(0,0,0);background-color: rgba(0,0,0,0.4); margin-top: 65px; margin-left: 20px;">

        <!-- Modal content -->
        <div class="modal-content" style="background-color: rgba(0,0,0,0.4);margin: 15% auto;padding: 20px;border: 1px solid #888;width: 80%;">
          <span class="close" style="color: #aaa;float: right;font-size: 28px;font-weight: bold;">&times;</span>
          <button id="p_mtn" onclick="bmtn()">MTN</button>
          <button id="p_glo" onclick="bglo()">Glo</button>
        </div>
      
      </div>
    <script type="text/javascript">
        var numb = Number(num.value)
        var card_mtn = []
        var card_glo = []
        var card_gen = []
        var sel_amt
        var struser
        var sel_ntw
        var strnwt
        var networks = []
        var balancem = 0
        var balanceg = 0
        var used = []
        var pin = []
        var plc = ''
        var card_mtn1 = []
        var card_mtn2 = []
        var card_mtn5 = []
        var card_mtn1k = []
        var card_glo1 = []
        var card_glo2 = []
        var card_glo5 = []
        var card_glo1k = []
        var my_num = '07063039733'

        
        function generate(a) {
            sel_amt = document.getElementById("amt");
            stramt = sel_amt.options[sel_amt.selectedIndex].value

            sel_ntw = document.getElementById("ntwk");
            strnwt = sel_ntw.options[sel_ntw.selectedIndex].value
            // console.log(stramt + 'ammmmm')

            for (let index = 0; index < a; index++) {
                // const element = array[index];
            if (strnwt === 'MTN'){ 
            if (stramt === '100'){
            pin = Math.floor(Math.random() * 10000)  + '-' + Math.floor(Math.random() * 10000) + '-' + Math.floor(Math.random() * 10000) + '-' + Math.floor(Math.random() * 10000) 
            var gen_m1 ='*555*'+ pin+'#'
            here.innerHTML += '<br>' + pin
            console.log(gen_m1 + 'aaaaa')
            card_mtn.push(gen_m1)
            card_mtn1.push(gen_m1)
            }
            else if (stramt === '200'){
            pin = Math.floor(Math.random() * 10000)  + '-' + Math.floor(Math.random() * 10000) + '-' + Math.floor(Math.random() * 10000) + '-' + Math.floor(Math.random() * 10000) 
            var gen_m2 ='*555*'+ pin+'#'
            here.innerHTML += '<br>' + pin
            console.log(gen_m2 + 'aaaaa')
            card_mtn.push(gen_m2)
            card_mtn2.push(gen_m2)
            }
            else if (stramt === '500'){
            pin = Math.floor(Math.random() * 10000)  + '-' + Math.floor(Math.random() * 10000) + '-' + Math.floor(Math.random() * 10000) + '-' + Math.floor(Math.random() * 10000) 
            var gen_m5 ='*555*'+ pin+'#'
            here.innerHTML += '<br>' + pin
            console.log(gen_m5 + 'aaaaa')
            card_mtn.push(gen_m5)
            card_mtn5.push(gen_m5)
            }
            else if (stramt === '1000'){
            pin = Math.floor(Math.random() * 10000)  + '-' + Math.floor(Math.random() * 10000) + '-' + Math.floor(Math.random() * 10000) + '-' + Math.floor(Math.random() * 10000) 
            var gen_m1k ='*555*'+ pin+'#'
            here.innerHTML += '<br>' + pin
            console.log(gen_m1k + 'aaaaa')
            card_mtn.push(gen_m1k)
            card_mtn1k.push(gen_m1k)
            }
            // console.log(card_mtn + 'mtmnnnn')

            }           

            if (strnwt === 'GLO'){  
                if (stramt === '100'){
            pin = Math.floor(Math.random() * 10000)  + '-' + Math.floor(Math.random() * 10000) + '-' + Math.floor(Math.random() * 10000) + '-' + Math.floor(Math.random() * 10000) 
            var gen_g1 ='*124*'+ pin+'#'
            here.innerHTML += '<br>' + pin
            console.log(gen_g1 + 'aaaaa')
            card_glo.push(gen_g1)
            card_mtn1.push(gen_g1)
            }
            else if (stramt === '200'){
            pin = Math.floor(Math.random() * 10000)  + '-' + Math.floor(Math.random() * 10000) + '-' + Math.floor(Math.random() * 10000) + '-' + Math.floor(Math.random() * 10000) 
            var gen_g2 ='*124*'+ pin+'#'
            here.innerHTML += '<br>' + pin
            console.log(gen_g2 + 'aaaaa')
            card_glo.push(gen_g2)
            card_glo2.push(gen_g2)
            }
            else if (stramt === '500'){
            pin = Math.floor(Math.random() * 10000)  + '-' + Math.floor(Math.random() * 10000) + '-' + Math.floor(Math.random() * 10000) + '-' + Math.floor(Math.random() * 10000) 
            var gen_g5 ='*124*'+ pin+'#'
            here.innerHTML += '<br>' + pin
            console.log(gen_g5 + 'aaaaa')
            card_glo.push(gen_g5)
            card_glo5.push(gen_g5)
            }
            else if (stramt === '1000'){
            pin = Math.floor(Math.random() * 10000)  + '-' + Math.floor(Math.random() * 10000) + '-' + Math.floor(Math.random() * 10000) + '-' + Math.floor(Math.random() * 10000) 
            var gen_g1k ='*124*'+ pin+'#'
            here.innerHTML += '<br>' + pin
            console.log(gen_g1k + 'aaaaa')
            card_glo.push(gen_g1k)
            card_glo1k.push(gen_g1k)
            }

            }

            }
            console.log(card_mtn + 'mtnnn')
            console.log(card_glo + 'gloo')
                   
        }
        function f_num(n) {
            var plc = scr.value
            scr.innerHTML += n; 

        }

        function call() {
            card_gen = card_mtn + '' + card_glo
            console.log(card_gen)
            plc = scr.value
            var modal = document.getElementById('myModal');
            var btn_m = document.getElementById("P_mtn");
            var btn_g = document.getElementById("p_glo");
            modal.style.display = "block";

        }
        function mytime() {
            var phn_2 = document.getElementById('call_p');
            // alert('yeeee');
            while ( balancem > 1) {
                balancem = balancem -= 10
            }
            if (balancem < '1'){
                scr.value = 'you are out of card'
                phn_2.style.display = 'none'
                scr.value = 'call terminated'
            }
        }
        function bmtn() {
            var modal = document.getElementById('myModal');
            modal.style.display = 'none'
            console.log(balancem+'nnnnnaaa')
            if (plc !== '' && plc.endsWith('#') === false){
                if (balancem < '1'){
                    scr.value = 'insufficient call card'
                }
                else{
                scr.value = 'calling...'+' '+ plc
                var phn_2 = document.getElementById('call_p');
                phn_2.style.display='block'
                scr2.value = my_num + ' ' + ' calling'
                setTimeout(mytime,5000)
                console.log('fffjghjjf')
                }
            }
            else{
            if (card_mtn == plc ){
                 modal.style.display = 'none'
                }   
            var con = card_mtn.includes(plc)
            console.log(plc + 'plll')
            console.log(con)
            console.log(used + 'used')
            var check = used.includes(plc)
            used.push(plc)
            console.log(check + 'ccc') 
          
            if (check == true) {
                modal.style.display = 'none'
                scr.value ='card used'
            }
            else {
                if (con === true ){
                modal.style.display = 'none'
                scr.value = 'recharge successful'
                if (card_mtn1.includes(plc)) {
                    balancem = balancem += 100
                }
                else if (card_mtn2.includes(plc)){
                    balancem = balancem += 200
                }
                else if (card_mtn5.includes(plc)){
                    balancem = balancem += 500
                }
                else if (card_mtn1k.includes(plc)){
                    balancem = balancem += 1000
                }
                console.log(plc + 'new')
                console.log(balancem)
                console.log(used + 'used')
            }
            else{
                modal.style.display = 'none'
                scr.value = 'card not valid'
            }
            } 

            }
            }

            function bglo() {
            var modal = document.getElementById('myModal');
            if (card_glo == plc ){
                 modal.style.display = 'none'
                }   
            var con_g = card_glo.includes(plc)
            // used.push(plc)
            console.log(plc + 'plll')
            console.log(con_g)
            console.log(used + 'used')
            var check = used.includes(plc)
            used.push(plc)
            console.log(check + 'ccc') 
          
            if (check == true) {
                modal.style.display = 'none'
                scr.value ='card used'
            }
            else {
                if (con_g === true ){
                modal.style.display = 'none'
                scr.value = 'recharge successful'
                if (card_glo1.includes(plc)) {
                    balanceg = balanceg += 100
                }
                else if (card_glo2.includes(plc)){
                    balanceg = balanceg += 200
                }
                else if (card_glo5.includes(plc)){
                    balanceg = balanceg += 500
                }
                else if (card_glo1k.includes(plc)){
                    balanceg = balanceg += 1000
                }
                console.log(plc + 'new')
                console.log(balanceg)
                console.log(used + 'used')
            }
            else{
                modal.style.display = 'none'
                scr.value = 'card not valid'
            }
            } 
                
            }
    </script>
</body>
</html>