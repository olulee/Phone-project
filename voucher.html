<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>voucher</title>
</head>
<body>
    <input id="num" type="number" placeholder="Number" >
    <select name="" id="amt">
        <option id="amt_1" value="100"> 100</option>
        <option id="amt_2" value="200">200</option>
        <option id="amt_5" value="500">500</option>
        <option id="amt_1k" value="1000">1000</option>
    </select>
    <select name="" id="ntwk">
        <option value="MTN"> MTN</option>
        <option value="GLO">GLO</option>
    </select>
    <button onclick="generate(num.value)">Generate</button>
    <div id="here"></div>

    <div id="dist">
        <div  id="dis" style="border:2px solid black; height: 450px; width: 250px; border-radius: 10px;">
            <div style="margin-top: 20px; margin-left:8px">
                <div></div>
                <textarea id="scr" name="" id="" cols="30" rows="10" style="height:140px ; width: 230px; font-size: 40px;"></textarea>
            </div>
            <div id="moda" style="display: none; position: fixed;z-index: 1;padding-top: 100px;">
                <div></div>
            </div>
            <div id="btn" style="margin-top: 40px">
                <table >
                <tr>
                    <button style="width: 70px; height: 40px; margin-left: 15px" onclick="f_num(1)" >1</button>
                    <button style="width: 70px; height: 40px; " onclick="f_num(2)">2</button>
                    <button style="width: 70px; height: 40px; " onclick="f_num(3)">3</button>
                </tr>

                <tr>
                    <button  style="width: 70px; height: 40px; margin-left: 15px" onclick="f_num(4)" >4</button>
                    <button style="width: 70px; height: 40px; " onclick="f_num(5)">5</button>
                    <button style="width: 70px; height: 40px; " onclick="f_num(6)">6</button>
                </tr>

                <tr>
                    <button style="width: 70px; height: 40px; margin-left: 15px" onclick="f_num(7)" >7</button>
                    <button style="width: 70px; height: 40px; " onclick="f_num(8)">8</button>
                    <button style="width: 70px; height: 40px; " onclick="f_num(9)">9</button>
                </tr>

                <tr>
                    <button  style="width: 70px; height: 40px; margin-left: 15px"  onclick="f_num('*')">*</button>
                    <button style="width: 70px; height: 40px; " onclick="f_num(0)">0</button>
                    <button style="width: 70px; height: 40px; " onclick="f_num('#')">#</button>
                </tr>

                <tr>
                    <button style="width: 70px; height: 40px; margin-left: 15px" onclick="call()" >Call</button>
                    <button style="width: 70px; height: 40px; ">3</button>
                    <button style="width: 70px; height: 40px; "><--</button>
                </tr>
            </table>
            </div>
        </div>
    </div>
    <div id="sel_nt" style="display: none; align-content: center; margin-left: 150px">
        <button onclick="sim1()">MTN</button> <br>
        <button onclick="sim2()">GLO</button>
    </div>


    </div>
    <div id="myModal" class="modal" style=" display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 18%;height: 20%;overflow: auto;background-color: rgb(0,0,0);background-color: rgba(0,0,0,0.4); margin-top: 65px; margin-left: 20px;">

        <!-- Modal content -->
        <div class="modal-content" style="background-color: rgba(0,0,0,0.4);margin: 15% auto;padding: 20px;border: 1px solid #888;width: 80%;">
          <span class="close" style="color: #aaa;float: right;font-size: 28px;font-weight: bold;">&times;</span>
          <button id="p_mtn" onclick="bmtn()">MTN</button>
          <button id="p_glo" onclick="bglo()">Glo</button>
        </div>
      
      </div>
    <script type="text/javascript">
        var numb = Number(num.value)
        var card_mtn = []
        var card_glo = []
        var card_gen = []
        var sel_amt
        var struser
        var sel_ntw
        var strnwt
        var networks = []
        var balance = 0
        var used = []
        var pin = []
        var plc = ''
        
        function generate(a) {
            sel_amt = document.getElementById("amt");
            stramt = sel_amt.options[sel_amt.selectedIndex].value

            sel_ntw = document.getElementById("ntwk");
            strnwt = sel_ntw.options[sel_ntw.selectedIndex].value

            for (let index = 0; index < a; index++) {
                // const element = array[index];
            if (strnwt === 'MTN'){ 
             
            pin = Math.floor(Math.random() * 10000)  + '-' + Math.floor(Math.random() * 10000) + '-' + Math.floor(Math.random() * 10000) + '-' + Math.floor(Math.random() * 10000) 
            var gen_m ='*555*'+ pin+'#'
            here.innerHTML += '<br>' + pin
            console.log(gen_m + 'aaaaa')
            card_mtn.push(gen_m)
           

            }
            var pocket = {}
            pocket.amount = stramt
            pocket.card_pin = pin
            console.log(pocket.amount + 'hhhhh')
            console.log(pocket.card_pin + 'ppppp')
            networks.push(pocket)
            console.log(networks + 'yyyyy')
            

            if (strnwt === 'GLO'){  
            var pin = Math.floor(Math.random() * 10000)  + '-' + Math.floor(Math.random() * 10000) + '-' + Math.floor(Math.random() * 10000) + '-' + Math.floor(Math.random() * 10000) 
            var gen_g = '*124*'+ pin+'#'
            here.innerHTML += '<br>' + pin
            card_glo.push(gen_g)
            }

    
            
            }
            console.log(card_mtn + 'mtnnn')
            console.log(card_glo + 'gloo')
            
            
        }
        function f_num(n) {
            var plc = scr.value
            scr.innerHTML += n; 
            // console.log(plc)
            // scr.innerHTML = 'f'
        }

        function call() {
            card_gen = card_mtn + '' + card_glo
            console.log(card_gen)
            plc = scr.value
            // btn.innerHTML = sel_nt.innerHTML
            // alert(document.getElementById('sel_nt'))
            // if ()
            var modal = document.getElementById('myModal');
            var btn_m = document.getElementById("P_mtn");
            var btn_g = document.getElementById("p_glo");
            modal.style.display = "block";
            // var con = card_mtn.includes(plc)
            // // used.push(plc)
            // console.log(plc + 'plll')
            // console.log(con)
            // console.log(used + 'used')
            // var check = used.includes(plc)
            // used.push(plc)
            // console.log(check + 'ccc') 
          
            // if (check == true) {
            //     scr.value ='card used'
            // }
            // else {
            //     if (con === true ){
            //     scr.value = 'recharge successful'
            //     balance = balance += 100
            //     console.log(plc + 'new')
            //     console.log(balance)
            //     console.log(used + 'used')
            // }
            // else{
            //     scr.value = 'card not valid'
            // }
            // } 
            
        }
        function bmtn() {
            var modal = document.getElementById('myModal');
            if (card_mtn == plc ){
                 modal.style.display = 'none'
                }   
            var con = card_mtn.includes(plc)
            // used.push(plc)
            console.log(plc + 'plll')
            console.log(con)
            console.log(used + 'used')
            var check = used.includes(plc)
            used.push(plc)
            console.log(check + 'ccc') 
          
            if (check == true) {
                modal.style.display = 'none'
                scr.value ='card used'
            }
            else {
                if (con === true ){
                modal.style.display = 'none'
                scr.value = 'recharge successful'
                if (stramt == 100) {
                    balance = balance += 100
                }
                else if (stramt == 200){
                    balance = balance += 200
                }
                console.log(plc + 'new')
                console.log(balance)
                console.log(used + 'used')
            }
            else{
                modal.style.display = 'none'
                scr.value = 'card not valid'
            }
            } 
                
                // else{
                //     modal.style.display = 'none'
                // }
                
            }

            function bglo() {
            var modal = document.getElementById('myModal');
            if (card_glo == plc ){
                 modal.style.display = 'none'
                }   
            var con = card_glo.includes(plc)
            // used.push(plc)
            console.log(plc + 'plll')
            console.log(con)
            console.log(used + 'used')
            var check = used.includes(plc)
            used.push(plc)
            console.log(check + 'ccc') 
          
            if (check == true) {
                modal.style.display = 'none'
                scr.value ='card used'
            }
            else {
                if (con === true ){
                modal.style.display = 'none'
                scr.value = 'recharge successful'
                balance = balance += 100
                console.log(plc + 'new')
                console.log(balance)
                console.log(used + 'used')
            }
            else{
                modal.style.display = 'none'
                scr.value = 'card not valid'
            }
            } 
                
            }
    </script>
</body>
</html>